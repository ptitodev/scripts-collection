<html><head><title>Set-HardDisk - PowerCLI System.Collections.Hashtable.ModuleName Help Reference</title><meta name="description" content=" Set-HardDisk" /><meta name="keywords" content="PowerCLI System.Collections.Hashtable.ModuleName Help Reference, Set-HardDisk, Set, HardDisk" /><link href="doc-style.css" type="text/css" rel="StyleSheet"></head><body><h2 class="title"><a class="title" href='index.html' target="_top">PowerCLI Reference</a></h2><h1>Set-HardDisk</h1><h2>Synopsis</h2>This cmdlet modifies the properties of the specified virtual hard disk.<p class="table-title">Syntax</p>Set-HardDisk [-HardDisk] &lt;HardDisk[]&gt; [[-CapacityKB] &lt;Int64&gt;] [-CapacityGB &lt;Decimal&gt;] [[-Persistence] &lt;String&gt;] [[-Datastore] &lt;Datastore&gt;] [-StorageFormat &lt;VirtualDiskStorageFormat&gt;] [-Controller &lt;ScsiController&gt;] [-Server &lt;VIServer[]&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]
<br/>
<br/>Set-HardDisk [-HardDisk] &lt;HardDisk[]&gt; [[-CapacityKB] &lt;Int64&gt;] [-CapacityGB &lt;Decimal&gt;] [[-Persistence] &lt;String&gt;] [[-Datastore] &lt;Datastore&gt;] [-StorageFormat &lt;VirtualDiskStorageFormat&gt;] [-Controller &lt;ScsiController&gt;] [-Server &lt;VIServer[]&gt;] [-HostCredential &lt;PSCredential&gt;] [-HostUser &lt;String&gt;] [-HostPassword &lt;SecureString&gt;] [-GuestCredential &lt;PSCredential&gt;] [-GuestUser &lt;String&gt;] [-GuestPassword &lt;SecureString&gt;] [-ToolsWaitSecs &lt;Int32&gt;] [-HelperVM &lt;VirtualMachine&gt;] [-Partition &lt;String&gt;] [-ResizeGuestPartition] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]
<br/>
<br/>Set-HardDisk [-HardDisk] &lt;HardDisk[]&gt; [-Inflate] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]
<br/>
<br/>Set-HardDisk [-HardDisk] &lt;HardDisk[]&gt; [-ZeroOut] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]<p class="table-title">Related Commands</p><a href='https://vdc-repo.vmware.com/vmwb-repository/dcr-public/7837e367-fe26-4d85-bd03-84d88261642c/2bc2f4e0-41f5-48b1-929e-e1568a8fe070/doc/Set-HardDisk.html'>Online version</a><br><a href='Copy-HardDisk.html'>Copy-HardDisk</a><br><a href='Get-HardDisk.html'>Get-HardDisk</a><br><a href='New-HardDisk.html'>New-HardDisk</a><br><a href='Remove-HardDisk.html'>Remove-HardDisk</a><br><a href='Move-HardDisk.html'>Move-HardDisk</a><br><p class="table-title">Detailed Description</p>This cmdlet modifies the properties of the specified virtual hard disk. You can change the size and the persistence type, and inflate or expand the specified virtual hard disk. Do not use the Inflate parameter at the same time with the Persistence and CapacityGB parameters. If a helper virtual machine is used, all virtual machines associated with the disk and the helper virtual machine should be powered off before expanding the disk.  When you resize more than one disks using a helper virtual machine, the disks are resized one by one causing the helper machine to power on and off for each virtual machine and this might slow the cmdlet performance. For a list of supported operating systems, see the PowerCLI User&#39;s Guide.<p class="table-title">Parameters</p><table cellspacing="0"><tr><th>Name</th><th>Type</th><th>Description</th><th>Required?</td><th>Pipeline Input</th><th>Default Value</th></tr><tr class="r1"><td><a id="HardDisk" name="HardDisk"></a><strong>HardDisk</strong></td><td><a href="HardDisk.html">HardDisk</a>[]</td><td>Specifies the virtual hard disk you want to configure.</td><td>true</td><td>true (ByValue)</td><tr class="r0"><td><a id="CapacityKB" name="CapacityKB"></a><strong>CapacityKB</strong></td><td>Int64</td><td>This parameter is obsolete. Use CapacityGB instead.
<br/>Specifies the updated capacity of the virtual disk in kilobytes (KB). If you are connected to a vCenter Server 2.0 or ESX 3.0 server, the size of the disk cannot be changed and the CapacityKB parameter is discarded. If you are connected to a vCenter Server 2.5 or ESX 3.5 server, the size of the disk can only be increased and the CapacityKB parameter is discarded if its value is less than the current disk size.</td><td>false</td><td>false</td><tr class="r1"><td><a id="Persistence" name="Persistence"></a><strong>Persistence</strong></td><td>String</td><td>Specifies the disk persistence mode. The valid values are Persistent, NonPersistent, IndependentPersistent, IndependentNonPersistent, and Undoable. This parameter is supported only when the disk type is rawVirtual or flat. The NonPersistent and Undoable values are deprecated and scheduled for removal. Their usage is not recommended because they do not work with snapshots and are not supported on ESX 3.5 and later.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Datastore" name="Datastore"></a><strong>Datastore</strong></td><td><a href="Datastore.html">Datastore</a></td><td>Specifies the datastore to which you want to move the specified hard disk. Moving a hard disk attached to a virtual machine to a different datastore is only supported on vCenter Server.</td><td>false</td><td>false</td><tr class="r1"><td><a id="CapacityGB" name="CapacityGB"></a><strong>CapacityGB</strong></td><td>Decimal</td><td>Specifies the updated capacity of the virtual disk in gigabytes (GB). If you are connected to a vCenter Server 2.0 or ESX 3.0 server, the size of the disk cannot be changed and the CapacityGB parameter is discarded. If you are connected to a vCenter Server 2.5 or ESX 3.5 server, the size of the disk can only be increased and the CapacityGB parameter is discarded if its value is less than the current disk size.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Confirm" name="Confirm"></a><strong>Confirm</strong></td><td>SwitchParameter</td><td>If the value is $true, indicates that the cmdlet asks for confirmation before running. If the value is $false, the cmdlet runs without asking for user confirmation.</td><td>false</td><td>false</td><tr class="r1"><td><a id="Controller" name="Controller"></a><strong>Controller</strong></td><td><a href="ScsiController.html">ScsiController</a></td><td>Specifies a SCSI controller to which you want to attach the hard disk.</td><td>false</td><td>false</td><tr class="r0"><td><a id="GuestCredential" name="GuestCredential"></a><strong>GuestCredential</strong></td><td>PSCredential</td><td>Specifies the PSCredential object that contains the credentials you want to use for authenticating with the guest operating system.</td><td>false</td><td>false</td><tr class="r1"><td><a id="GuestPassword" name="GuestPassword"></a><strong>GuestPassword</strong></td><td>SecureString</td><td>Specifies the password you want to use for authenticating with the guest operating system.</td><td>false</td><td>false</td><tr class="r0"><td><a id="GuestUser" name="GuestUser"></a><strong>GuestUser</strong></td><td>String</td><td>Specifies the username you want to use for authenticating with the guest operating system.</td><td>false</td><td>false</td><tr class="r1"><td><a id="HelperVM" name="HelperVM"></a><strong>HelperVM</strong></td><td><a href="VirtualMachine.html">VirtualMachine</a></td><td>Specifies a helper virtual machine you want to use when expanding a Windows virtual machine system disk.
<br/>LVM (logical volume manager) for Linux is not supported and Linux guest system disks cannot be expanded. When a helper virtual machine is used, all virtual machines associated with the disk and the helper virtual machine must be powered off before expanding the disk. When you resize more than one disks using a helper virtual machine, the disks are resized one by one causing the helper machine to power on and off for each virtual machine, and this might slow down the cmdlet performance.</td><td>false</td><td>false</td><tr class="r0"><td><a id="HostCredential" name="HostCredential"></a><strong>HostCredential</strong></td><td>PSCredential</td><td>Specifies the PSCredential object that contains the credentials you want to use for authenticating with the host.</td><td>false</td><td>false</td><tr class="r1"><td><a id="HostPassword" name="HostPassword"></a><strong>HostPassword</strong></td><td>SecureString</td><td>Specifies the password you want to use for authenticating with the host.</td><td>false</td><td>false</td><tr class="r0"><td><a id="HostUser" name="HostUser"></a><strong>HostUser</strong></td><td>String</td><td>Specifies the username you want to use for authenticating with the host.</td><td>false</td><td>false</td><tr class="r1"><td><a id="Inflate" name="Inflate"></a><strong>Inflate</strong></td><td>SwitchParameter</td><td>Indicates that you want to inflate the hard disk.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Partition" name="Partition"></a><strong>Partition</strong></td><td>String</td><td>Specifies the partitions you want to resize. On Windows, you can specify which partition you want to resize by using the Partition parameter. If you do not specify a partition, the last partition of the disk is resized.
<br/>On Linux, only the last partition can be expanded.
<br/>
<br/>Resizing guest partitions is supported only for Windows OS and for ext3 partitions on RHEL 5. It is achieved by scripts, provided with the VMware PowerCLI installation. You can modify these scripts or add new ones to support operating systems different than Windows and RHEL 5, and more specific disk resizing scenarios. The scripts are located in the &quot;Scripts&quot; folder in the PowerCLI installation directory and their names have the following format:
<br/>
<br/>GuestDiskExpansion_&lt;OS_Identifier&gt;
<br/>
<br/>&lt;OS_Identifier&gt; is the guest family or the guest ID (as returned by Get-VMGuest).
<br/>
<br/>If no partition is specified, the last partition of the hard disk is resized.</td><td>false</td><td>false</td><tr class="r1"><td><a id="ResizeGuestPartition" name="ResizeGuestPartition"></a><strong>ResizeGuestPartition</strong></td><td>SwitchParameter</td><td>Note: This functionality is deprecated and is not functional on the currently supported guest operating systems. Resizing guest disks works only on Windows XP Service Pack 3 and Red Hat Enterprise Linux 5.
<br/>
<br/>Indicates that you want to resize the guest partition of the disk. To use this feature, VMware Tools must be running on the virtual machine.
<br/>On Windows, you can specify which partition you want to resize by using the Partition parameter. If you don&#39;t specify a partition, the last partition of the disk is resized.
<br/>On Linux, only the last partition can be expanded.
<br/>
<br/>Resizing guest partitions is supported only for Windows OS and for ext3 partitions on RHEL 5. It is achieved by scripts, provided with the VMware PowerCLI installation. You can modify these scripts or add new ones to support operating systems different than Windows and RHEL 5, and more specific disk resizing scenarios. The scripts are located in the &quot;Scripts&quot; folder in the PowerCLI installation directory and their names have the following format:
<br/>
<br/>GuestDiskExpansion_&lt;OS_Identifier&gt;
<br/>
<br/>&lt;OS_Identifier&gt; is the guest family or the guest ID (as returned by Get-VMGuest).</td><td>false</td><td>false</td><tr class="r0"><td><a id="Server" name="Server"></a><strong>Server</strong></td><td><a href="VIServer.html">VIServer</a>[]</td><td>Specifies the vCenter Server systems on which you want to run the cmdlet. If no value is given to this parameter, the command runs on the default servers. For more information about default servers, see the description of Connect-VIServer.</td><td>false</td><td>false</td><tr class="r1"><td><a id="StorageFormat" name="StorageFormat"></a><strong>StorageFormat</strong></td><td><a href="VirtualDiskStorageFormat.html">VirtualDiskStorageFormat</a></td><td>Specifies the storage format of the relocated hard disk. This parameter is applicable only when moving a virtual machine disk to a different datastore, using the Datastore parameter. This parameter accepts Thin, Thick, and EagerZeroedThick values.</td><td>false</td><td>false</td><tr class="r0"><td><a id="ToolsWaitSecs" name="ToolsWaitSecs"></a><strong>ToolsWaitSecs</strong></td><td>Int32</td><td>Specifies the time in seconds to wait for a response from VMware Tools. If a non-positive value is provided, the system waits infinitely long time.</td><td>false</td><td>false</td><tr class="r1"><td><a id="WhatIf" name="WhatIf"></a><strong>WhatIf</strong></td><td>SwitchParameter</td><td>Indicates that the cmdlet is run only to display the changes that would be made and actually no objects are modified.</td><td>false</td><td>false</td><tr class="r0"><td><a id="ZeroOut" name="ZeroOut"></a><strong>ZeroOut</strong></td><td>SwitchParameter</td><td>Specifies that you want to fill the hard disk with zeros. This parameter is supported only if you are directly connected to an ESX/ESXi host.</td><td>false</td><td>false</td></table><p class="table-title">Return Type</p>Zero or more modified <a href="HardDisk.html">HardDisk</a> objectsHardDisk
<p class="table-title">Notes</p>Set-HardDisk cannot inflate a hard disk that has already been inflated.
    Non-persistent and undoable disks are not supported.
    Migrating a hard disk attached to a virtual machine to a different datastore is supported only on vCenter Server.<p class="table-title">Examples</p><div class="example"><p class="example-title">--------------  Example 1 --------------</p><pre class="programlisting">Get-HardDisk -VM $vm | Set-HardDisk -Persistence &quot;IndependentNonPersistent&quot;</pre><p>Changes the persistence of a hard disk to IndependentNonPersistent.</p><p class="example-title">--------------  Example 2 --------------</p><pre class="programlisting">Set-HardDisk -HardDisk $harddisk -CapacityGB $extendedCapacity -GuestCredential $guestCred</pre><p>Extends a hard disk with the specified capacity. The command also extends the disk on the guest OS.</p><p class="example-title">--------------  Example 3 --------------</p><pre class="programlisting">Set-HardDisk -HardDisk $harddisk -Datastore $datastore</pre><p>Moves the hard disk to the specified datastore.</p></div><hr>Copyright &copy; VMware, Inc.&nbsp;All rights reserved.</body></html>
