<html><head><title>Set-VMHost - PowerCLI System.Collections.Hashtable.ModuleName Help Reference</title><meta name="description" content=" Set-VMHost" /><meta name="keywords" content="PowerCLI System.Collections.Hashtable.ModuleName Help Reference, Set-VMHost, Set, VMHost" /><link href="doc-style.css" type="text/css" rel="StyleSheet"></head><body><h2 class="title"><a class="title" href='index.html' target="_top">PowerCLI Reference</a></h2><h1>Set-VMHost</h1><h2>Synopsis</h2>This cmdlet modifies the configuration of the host.<p class="table-title">Syntax</p>Set-VMHost [-VMHost] &lt;VMHost[]&gt; [[-State] &lt;VMHostState&gt;] [-VMSwapfilePolicy &lt;VMSwapfilePolicy&gt;] [-VMSwapfileDatastore &lt;Datastore&gt;] [-Profile &lt;VMHostProfile&gt;] [-Evacuate] [-TimeZone &lt;VMHostTimeZone&gt;] [-LicenseKey &lt;String&gt;] [-VsanDataMigrationMode &lt;VsanDataMigrationMode&gt;] [-Server &lt;VIServer[]&gt;] [-RunAsync] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]<p class="table-title">Related Commands</p><a href='https://vdc-repo.vmware.com/vmwb-repository/dcr-public/7837e367-fe26-4d85-bd03-84d88261642c/2bc2f4e0-41f5-48b1-929e-e1568a8fe070/doc/Set-VMHost.html'>Online version</a><br><a href='Add-VMHost.html'>Add-VMHost</a><br><a href='Get-VMHost.html'>Get-VMHost</a><br><a href='Move-VMHost.html'>Move-VMHost</a><br><a href='Remove-VMHost.html'>Remove-VMHost</a><br><a href='Restart-VMHost.html'>Restart-VMHost</a><br><a href='Start-VMHost.html'>Start-VMHost</a><br><a href='Stop-VMHost.html'>Stop-VMHost</a><br><a href='Suspend-VMHost.html'>Suspend-VMHost</a><br><a href='Unknown.html'>Unknown</a><br><p class="table-title">Detailed Description</p>This cmdlet modifies the configuration of the host.
<br/>
<br/>The State parameter is set to Connected.
<br/>- If the host is currently connected and is not in a maintenance mode, it does nothing.
<br/>- If the host is in a maintenance mode, it exits the maintenance mode.
<br/>- If the host is not connected or is not responding, it tries to reconnect.
<br/>
<br/>The State parameter is set to Disconnected.
<br/>- If the host is currently connected, it attempts to disconnect.
<br/>- If the host is not connected or not responding, it does nothing.
<br/>
<br/>The State parameter is set to Maintenance.
<br/>- If the host is currently connected and not in a maintenance mode, it enters a maintenance mode.
<br/>- If the host is currently connected and in a maintenance mode, it does nothing.
<br/>- If the host is not connected or not responding, it attempts to reconnect and enter maintenance mode.<p class="table-title">Parameters</p><table cellspacing="0"><tr><th>Name</th><th>Type</th><th>Description</th><th>Required?</td><th>Pipeline Input</th><th>Default Value</th></tr><tr class="r1"><td><a id="State" name="State"></a><strong>State</strong></td><td><a href="VMHostState.html">VMHostState</a></td><td>Specifies the state of the host. The valid values are Connected, Disconnected, and Maintenance. If there are powered on virtual machines on the host, you can set the host into a maintenance mode, only if it is  part of a DRS-enabled cluster. Before entering maintenance mode, if the host is fully automated, the cmdlet first relocates all powered on virtual machines. If the host is not automated or partially automated, you must first generate a DRS recommendation and wait until all powered on virtual machines are relocated or powered off. In this case, you must specify the RunAsync parameter, otherwise an error is thrown.</td><td>false</td><td>false</td><tr class="r0"><td><a id="VMHost" name="VMHost"></a><strong>VMHost</strong></td><td><a href="VMHost.html">VMHost</a>[]</td><td>Specifies the host you want to configure.</td><td>true</td><td>true (ByValue)</td><tr class="r1"><td><a id="Confirm" name="Confirm"></a><strong>Confirm</strong></td><td>SwitchParameter</td><td>If the value is $true, indicates that the cmdlet asks for confirmation before running. If the value is $false, the cmdlet runs without asking for user confirmation.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Evacuate" name="Evacuate"></a><strong>Evacuate</strong></td><td>SwitchParameter</td><td>If the value is $true, vCenter automatically reregisters the virtual machines that are compatible for reregistration. If they are not compatible, they remain on the host. If there are powered-on virtual machines that cannot be reregistered the operation waits until they are powered off manually. The Evacuate parameter is valid only when connected to a vCenter Server system and the State parameter is set to Maintenance. Also, the virtual machine host must be in a DRS-enabled cluster.</td><td>false</td><td>false</td><tr class="r1"><td><a id="LicenseKey" name="LicenseKey"></a><strong>LicenseKey</strong></td><td>String</td><td>Specifies the license key to be used by the host. You can set the host to evaluation mode by passing the 00000-00000-00000-00000-00000 evaluation key.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Profile" name="Profile"></a><strong>Profile</strong></td><td><a href="VMHostProfile.html">VMHostProfile</a></td><td>Specifies a host profile you want to associate with the host. If the value of this parameter is $null, the current profile association is removed.</td><td>false</td><td>false</td><tr class="r1"><td><a id="RunAsync" name="RunAsync"></a><strong>RunAsync</strong></td><td>SwitchParameter</td><td>Indicates that the command returns immediately without waiting for the task to complete. In this mode, the output of the cmdlet is a Task object. For more information about the RunAsync parameter run &quot;help About_RunAsync&quot; in the VMware PowerCLI console.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Server" name="Server"></a><strong>Server</strong></td><td><a href="VIServer.html">VIServer</a>[]</td><td>Specifies the vCenter Server systems on which you want to run the cmdlet. If no value is given to this parameter, the command runs on the default servers. For more information about default servers, see the description of Connect-VIServer.</td><td>false</td><td>false</td><tr class="r1"><td><a id="TimeZone" name="TimeZone"></a><strong>TimeZone</strong></td><td><a href="VMHostTimeZone.html">VMHostTimeZone</a></td><td>Specifies the time zone for the host by using its name or by providing the corresponding time zone object. Time zone names support wildcards. If the wildcards match more than one time zones, an error is reported. Time zone objects can only be applied to the hosts they originate from.</td><td>false</td><td>false</td><tr class="r0"><td><a id="VMSwapfileDatastore" name="VMSwapfileDatastore"></a><strong>VMSwapfileDatastore</strong></td><td><a href="Datastore.html">Datastore</a></td><td>Specifies a datastore that is visible to the host and can be used for storing swapfiles for the virtual machines that run on this host. Using a host-specific swap location might degrade the VMotion performance.</td><td>false</td><td>false</td><tr class="r1"><td><a id="VMSwapfilePolicy" name="VMSwapfilePolicy"></a><strong>VMSwapfilePolicy</strong></td><td><a href="VMSwapfilePolicy.html">VMSwapfilePolicy</a></td><td>Specifies the swapfile placement policy. The following values are valid:
<br/>
<br/>InHostDataStore - Stores the swapfile in the datastore specified by the VMSwapfileDatastoreID property of the virtual machine host. If the VMSwapfileDatastoreID property is not set or indicates a datastore with insufficient free space, the swapfile is stored in the same directory as the virtual machine. This setting might degrade the VMotion performance.
<br/>
<br/>WithVM - Stores the swapfile in the same directory as the virtual machine.</td><td>false</td><td>false</td><tr class="r0"><td><a id="VsanDataMigrationMode" name="VsanDataMigrationMode"></a><strong>VsanDataMigrationMode</strong></td><td><a href="VsanDataMigrationMode.html">VsanDataMigrationMode</a></td><td>Specifies the special action to take regarding Virtual SAN data when moving in maintenance mode. The VsanDataMigrationMode parameter is valid only when connected to a vCenter Server system and when State parameter is set to VMHostState.Maintenance.</td><td>false</td><td>false</td><tr class="r1"><td><a id="WhatIf" name="WhatIf"></a><strong>WhatIf</strong></td><td>SwitchParameter</td><td>Indicates that the cmdlet is run only to display the changes that would be made and actually no objects are modified.</td><td>false</td><td>false</td></table><p class="table-title">Return Type</p>Zero or more modified <a href="VMHost.html">VMHost</a> objects
<p class="table-title">Notes</p>The TimeZone parameter is supported only on ESX 4.1/vCenter Server 4.1, and later.
    The Evacuate parameter is valid only when connected to a vCenter Server system and the host is a part of a 
    DRS-enabled cluster.
    The VsanDataMigrationMode parameter is valid only when connected to a vCenter Server system and when State 
    parameter is set to VMHostState.Maintenance.<p class="table-title">Examples</p><div class="example"><p class="example-title">--------------  Example 1 --------------</p><pre class="programlisting">Set-VMHost -VMHost Host -State &quot;Disconnected&quot;</pre><p>Resets the state of the Host virtual host to disconnected.</p><p class="example-title">--------------  Example 2 --------------</p><pre class="programlisting">$cluster = Get-Cluster -VMHost Host

$task = Set-VMHost -VMHost Host -State &quot;Maintenance&quot; -RunAsync

Get-DrsRecommendation -Cluster $cluster | where {$_.Reason -eq &quot;Host is entering maintenance mode&quot;} | Apply-DrsRecommendation

$vmhost = Wait-Task $task</pre><p>Activate a maintenance mode for a not automated host that is part of a DRS-enabled cluster and has powered on virtual machines on it.</p></div><hr>Copyright &copy; VMware, Inc.&nbsp;All rights reserved.</body></html>
