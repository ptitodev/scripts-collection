<html><head><title>New-VMHostNetworkAdapter - PowerCLI System.Collections.Hashtable.ModuleName Help Reference</title><meta name="description" content=" New-VMHostNetworkAdapter" /><meta name="keywords" content="PowerCLI System.Collections.Hashtable.ModuleName Help Reference, New-VMHostNetworkAdapter, New, VMHostNetworkAdapter" /><link href="doc-style.css" type="text/css" rel="StyleSheet"></head><body><h2 class="title"><a class="title" href='index.html' target="_top">PowerCLI Reference</a></h2><h1>New-VMHostNetworkAdapter</h1><h2>Synopsis</h2>This cmdlet creates a new HostVirtualNIC (Service Console or VMKernel) on the specified host.<p class="table-title">Syntax</p>New-VMHostNetworkAdapter [[-VMHost] &lt;VMHost&gt;] [[-PortGroup] &lt;String&gt;] [-PortId &lt;String&gt;] [-VirtualSwitch] &lt;VirtualSwitchBase&gt; [[-IP] &lt;String&gt;] [[-SubnetMask] &lt;String&gt;] [[-Mac] &lt;String&gt;] [-Mtu &lt;Int32&gt;] [-ConsoleNic] [-VMotionEnabled &lt;Boolean&gt;] [-FaultToleranceLoggingEnabled &lt;Boolean&gt;] [-IPv6ThroughDhcp] [-AutomaticIPv6] [-IPv6 &lt;String[]&gt;] [-ManagementTrafficEnabled &lt;Boolean&gt;] [-VsanTrafficEnabled &lt;Boolean&gt;] [-Server &lt;VIServer[]&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]<p class="table-title">Related Commands</p><a href='https://vdc-repo.vmware.com/vmwb-repository/dcr-public/7837e367-fe26-4d85-bd03-84d88261642c/2bc2f4e0-41f5-48b1-929e-e1568a8fe070/doc/New-VMHostNetworkAdapter.html'>Online version</a><br><a href='Remove-VMHostNetworkAdapter.html'>Remove-VMHostNetworkAdapter</a><br><a href='Set-VMHostNetworkAdapter.html'>Set-VMHostNetworkAdapter</a><br><p class="table-title">Detailed Description</p>This cmdlet creates a new HostVirtualNIC (Service Console or VMKernel) on the specified host. Creates a port group with a name specified by the PortGroup parameter on the virtual switch passed through the VirtualSwitch parameter. Adds either a Console NIC if ConsoleNIC is set, or a VMKernel NIC otherwise.<p class="table-title">Parameters</p><table cellspacing="0"><tr><th>Name</th><th>Type</th><th>Description</th><th>Required?</td><th>Pipeline Input</th><th>Default Value</th></tr><tr class="r1"><td><a id="VMHost" name="VMHost"></a><strong>VMHost</strong></td><td><a href="VMHost.html">VMHost</a></td><td>Specifies the host to which you want to add the new adapter. This parameter is mandatory when creating a network adapter on a distributed switch.</td><td>false</td><td>true (ByValue)</td><tr class="r0"><td><a id="PortGroup" name="PortGroup"></a><strong>PortGroup</strong></td><td>String</td><td>Specifies the port group to which you want to add the new adapter. If a distributed switch is passed to the VirtualSwitch parameter, an existing port group name should be specified. For standard virtual switches, if the port group is non-existent, a new port group with the specified name will be created and the new adapter will be added to the port group.</td><td>false</td><td>false</td><tr class="r1"><td><a id="VirtualSwitch" name="VirtualSwitch"></a><strong>VirtualSwitch</strong></td><td><a href="VirtualSwitchBase.html">VirtualSwitchBase</a></td><td>Specifies the virtual switch to which you want to add the new network adapter.</td><td>true</td><td>false</td><tr class="r0"><td><a id="IP" name="IP"></a><strong>IP</strong></td><td>String</td><td>Specifies an IP address for the new network adapter. All IP addresses are specified using IPv4 dot notation. If IP is not specified, DHCP mode is enabled. For VMKernel network adapters, the DHCP mode is supported only on vCenter Server 4.1, ESX 4.1, and later.</td><td>false</td><td>false</td><tr class="r1"><td><a id="SubnetMask" name="SubnetMask"></a><strong>SubnetMask</strong></td><td>String</td><td>Specifies a subnet mask for the new network adapter.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Mac" name="Mac"></a><strong>Mac</strong></td><td>String</td><td>Specifies a media access control (MAC) address for the new virtual network adapter.</td><td>false</td><td>false</td><tr class="r1"><td><a id="AutomaticIPv6" name="AutomaticIPv6"></a><strong>AutomaticIPv6</strong></td><td>SwitchParameter</td><td>Indicates that the IPv6 address is obtained through a router advertisement.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Confirm" name="Confirm"></a><strong>Confirm</strong></td><td>SwitchParameter</td><td>If the value is $true, indicates that the cmdlet asks for confirmation before running. If the value is $false, the cmdlet runs without asking for user confirmation.</td><td>false</td><td>false</td><tr class="r1"><td><a id="ConsoleNic" name="ConsoleNic"></a><strong>ConsoleNic</strong></td><td>SwitchParameter</td><td>If the value is $true, indicates that you want to create a service console virtual network adapter. If the value is $false, indicates that you want to create a virtual host/VMkernel network adapter. Not supported on ESXi.</td><td>false</td><td>false</td><tr class="r0"><td><a id="FaultToleranceLoggingEnabled" name="FaultToleranceLoggingEnabled"></a><strong>FaultToleranceLoggingEnabled</strong></td><td>Boolean</td><td>Indicates that the network adapter is enabled for Fault Tolerance (FT) logging. This parameter is supported only on ESX/vCenter Server 4.1 and later.</td><td>false</td><td>false</td><tr class="r1"><td><a id="IPv6" name="IPv6"></a><strong>IPv6</strong></td><td>String[]</td><td>Specifies multiple static addresses using the following format: &lt;IPv6&gt;/&lt;subnet_prefix_length&gt; or &lt;IPv6&gt;. If you skip &lt;subnet_prefix_length&gt;, the default value of 64 is used.</td><td>false</td><td>false</td><tr class="r0"><td><a id="IPv6ThroughDhcp" name="IPv6ThroughDhcp"></a><strong>IPv6ThroughDhcp</strong></td><td>SwitchParameter</td><td>Indicates that the IPv6 address is obtained through DHCP.</td><td>false</td><td>false</td><tr class="r1"><td><a id="ManagementTrafficEnabled" name="ManagementTrafficEnabled"></a><strong>ManagementTrafficEnabled</strong></td><td>Boolean</td><td>Indicates that you want to enable the network adapter for management traffic. This parameter is supported only on ESX/ESXi/vCenter Server 4.1 and later.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Mtu" name="Mtu"></a><strong>Mtu</strong></td><td>Int32</td><td>Specifies the MTU size. This parameter is supported only on ESX/vCenter Server 4.1 and later.</td><td>false</td><td>false</td><tr class="r1"><td><a id="PortId" name="PortId"></a><strong>PortId</strong></td><td>String</td><td>Specifies the port of the specified distributed switch to which you want to connect the network adapter. Use this parameter only if a distributed switch is passed to the VirtualSwitch parameter.</td><td>false</td><td>false</td><tr class="r0"><td><a id="Server" name="Server"></a><strong>Server</strong></td><td><a href="VIServer.html">VIServer</a>[]</td><td>The Server parameter is required when the host is specified by name. In this case, the host with the specified name is searched for on the specified Servers and a network adapter is added to it. If a VMHost object is passed to the VMHost parameter, the Server parameter is not used.</td><td>false</td><td>false</td><tr class="r1"><td><a id="VMotionEnabled" name="VMotionEnabled"></a><strong>VMotionEnabled</strong></td><td>Boolean</td><td>Indicates that you want to use the new virtual host/VMKernel network adapter for VMotion.</td><td>false</td><td>false</td><tr class="r0"><td><a id="VsanTrafficEnabled" name="VsanTrafficEnabled"></a><strong>VsanTrafficEnabled</strong></td><td>Boolean</td><td>Indicates that Virtual SAN traffic is enabled on this network adapter.</td><td>false</td><td>false</td><tr class="r1"><td><a id="WhatIf" name="WhatIf"></a><strong>WhatIf</strong></td><td>SwitchParameter</td><td>Indicates that the cmdlet is run only to display the changes that would be made and actually no objects are modified.</td><td>false</td><td>false</td></table><p class="table-title">Return Type</p>The newly created <a href="HostVirtualNic.html">HostVirtualNic</a> object
<p class="table-title">Notes</p>To configure IPv6 settings, you must be working on ESX 4.1 or later and IPv6 must be enabled on the ESX system.<p class="table-title">Examples</p><div class="example"><p class="example-title">--------------  Example 1 --------------</p><pre class="programlisting">$vmhost = Get-VMHost -Name MyVMHost1
$myVirtualSwitch = Get-VirtualSwitch -VMHost $vmhost -Name MyVirtualSwitch1
New-VMHostNetworkAdapter -VMHost $vmhost -PortGroup MyVMKernelPortGroup1 -VirtualSwitch $myVirtualSwitch -Mtu 4000</pre><p>Creates a VMKernel port group at the MyVirtualSwitch1 virtual switch. The IP address is obtained via DHCP.</p><p class="example-title">--------------  Example 2 --------------</p><pre class="programlisting">$vmhost = Get-VMHost -Name MyVMHost1
$myVirtualSwitch = Get-VirtualSwitch -VMHost $vmhost -Name MyVirtualSwitch1
New-VMHostNetworkAdapter -VMHost $vmhost -PortGroup MyVMKernelPortGroup1 -VirtualSwitch $myVirtualSwitch -IP 192.168.168.110 -SubnetMask 255.255.255.0</pre><p>Creates a VMKernel port group at the MyVirtualSwitch1 virtual switch and assigns a static IP address.</p><p class="example-title">--------------  Example 3 --------------</p><pre class="programlisting">$vmhost = Get-VMHost -Name MyVMHost1
$myVirtualSwitch = Get-VirtualSwitch -VMHost $vmhost -Name MyVirtualSwitch1
New-VMHostNetworkAdapter -VMHost $vmhost -VirtualSwitch $myVirtualSwitch -PortGroup MyVMKernelPortGroup1 -IP 192.168.0.1 -SubnetMask 255.255.255.0 -IPv6 &quot;0200:2342::1/32&quot;</pre><p>Creates a VMKernel NIC that has an IPv4 address and an IPv6 address.</p><p class="example-title">--------------  Example 4 --------------</p><pre class="programlisting">$vmhost = Get-VMHost -Name MyVMHost1
$myVirtualSwitch = Get-VirtualSwitch -VMHost $vmhost -Name MyVirtualSwitch1
New-VMHostNetworkAdapter -VMHost $vmhost -VirtualSwitch $myVirtualSwitch -PortGroup MyVMKernelPortGroup1 -IP 192.168.0.1 -SubnetMask 255.255.255.0 -AutomaticIPv6</pre><p>Creates a VMKernel NIC that obtains IPv6 automatically (by router advertisement) and takes the desired IPv4 address.</p><p class="example-title">--------------  Example 5 --------------</p><pre class="programlisting">$vmhost = Get-VMHost -Name MyVMHost1
$myVirtualSwitch = Get-VirtualSwitch -VMHost $vmhost -Name MyVirtualSwitch1
New-VMHostNetworkAdapter -VMHost $vmhost -VirtualSwitch $myVirtualSwitch -PortGroup MyVMKernelPortGroup1 -IPv6ThroughDhcp</pre><p>Creates a VMKernel NIC that obtains the IPv4 and IPv6 addresses by DHCP.</p><p class="example-title">--------------  Example 6 --------------</p><pre class="programlisting">$vmhost = Get-VMHost -Name MyVMHost1
$myVirtualSwitch = Get-VirtualSwitch -VMHost $vmhost -Name MyVirtualSwitch1
New-VMHostNetworkAdapter -VMHost $vmhost -PortGroup MyConsolePortGroup1 -VirtualSwitch $myVirtualSwitch -ConsoleNic</pre><p>Creates a Service Console port group at the vSwitch virtual switch. The IP address is obtained via DHCP.</p><p class="example-title">--------------  Example 7 --------------</p><pre class="programlisting">$myVMHost = Get-VMHost -Name &quot;MyVMHost&quot;
$myVDSwitch = Get-VDSwitch -Name &quot;MyVDSwitch&quot;
New-VMHostNetworkAdapter -VMHost $myVMHost -PortGroup &quot;MyVDPortgroup&quot; -VirtualSwitch $myVDSwitch -IP 192.168.0.50 -SubnetMask 255.255.255.0</pre><p>Creates a new VMKernel network adapter and connects it to the specified port group on the specified distributed switch.</p><p class="example-title">--------------  Example 8 --------------</p><pre class="programlisting">$myVMHost = Get-VMHost -Name &quot;MyVMHost&quot;
$myVDSwitch = Get-VDSwitch -Name &quot;MyVDSwitch&quot;
New-VMHostNetworkAdapter -VMHost $myVMHost -VirtualSwitch $myVDSwitch -PortId 100 -IP 192.168.0.50 -SubnetMask 255.255.255.0</pre><p>Creates a new VMKernel network adapter and connects it to a specified port on a specified distributed switch.</p></div><hr>Copyright &copy; VMware, Inc.&nbsp;All rights reserved.</body></html>
