<html><headd> <title>New-DeployRule - vSphere Auto Deploy Reference</title> <meta content=" New-DeployRule" name="description"> <meta content= "vSphere Auto Deploy Reference, New-DeployRule, New, DeployRule" name= "keywords"> <link href="doc-style.css" rel="StyleSheet" type="text/css"></head><body><h2 class="title"><a class="title" href='index.html' target="_top">PowerCLI Reference</a></h2> <h2 class="title"><a class="title" href='index.html' target="_top">vSphere Auto Deploy Reference</a></h2> <h1>New-DeployRule</h1> <h2>Synopsis</h2>Creates a new rule. <p class="table-title">Syntax</p>New-DeployRule [-Name] &lt;String&gt; -Pattern &lt;String[]&gt; -Item &lt;VIObjectCore[]&gt; [&lt;CommonParameters&gt;]^M<br> New-DeployRule [-Name] &lt;String&gt; -AllHosts -Item &lt;VIObjectCore[]&gt; [&lt;CommonParameters&gt;] <p class="table-title">Related Commands</p><a href= 'Add-DeployRule.html'>Add-DeployRule</a><br> <a href='Copy-Dep%20loyRule.html'>Copy-DeployRule</a><br> <a href='Set-DeployRule.html'>Set-DeployRule</a><br> <p class="table-title">Detailed Description</p>Creates a new rule with the specified items and patterns. The items specify what should be associated with an ESXi host and the patterns specify which ESXi hosts the rule applies to. A rule on its own does not affect anything. The rule must first be added to the working rule se t in order to place it in context with the other rules in the system. Since multiple rules can match a single host, the rule set is used to rank the rules. Items in higher ranking rules are preferred over items in lower ranking rules. Only one item of a particular type will be associated with the host. For example, if two rules in a rule set have host profiles, only the profile in the higher ranking rule will be used. Alternatively, if one rule has a host profile and the other rule has an image profile, both rules will have an affect.^M<br> ^M<br> You must have the "AutoDeploy.Rule.Create" privilege on the root folder of vCenter Server to use this cmdlet. <p class="table-title">Parameters</p> <table cellspacing="0"> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Required?</th> <th>Pipeline Input</th> <th>D efault Value</th> </tr> <tr class="r1"> <td><a id="Name" name="Name"></a><strong>Name</strong></td> <td>String</td> <td>Name of the new rule.</td> <td>true</td> <td>false</td> <td></td> </tr> <tr class="r0"> <td><a id="AllHosts" name= "AllHosts"></a><strong>AllHosts</strong></td> <td>SwitchParameter</td> <td>Specify AllHosts to apply the new rule to all hosts managed by VMware Auto Deploy. Hosts are managed by VMware Auto Deplo y if the DHCP server directs them to the Auto Deploy TFTP configuration file.</td> <td>true</td> <td>false</td> <td></td> </tr> <tr class="r1"> <td><a id="Item" name="Item"></a><strong>Item</strong></td> <td>VIObjectCore[]</td> <td>Item the rule should apply to the hosts. Can be an image profile, a script bundle, a host profile, or a folder or cluster on the vCenter Server system to add the host to.</td> <td>true</td> <td>true (ByValue)</td> <td></td> </tr> <tr class="r0"> <td><a id="Pattern" name= "Pattern"></a><strong>Pattern</strong></td> <td>String[]</td> <td>Set of hosts the new rule should apply to. ^M<br> ^M<br> Pattern strings use the following syntax: ^M<br> ^M<br> &lt;attr&gt;==&lt;value&gt; Adds a pattern that exactly matches the specified value against the specified attribute. Use this syntax if you need to match a string that contains a co mma.^M<br> ^M<br> &lt;attr&gt;=&lt;Val1 &gt;[,val2,... ,valN] Adds a pattern that matches against the comma-separated list of values. ^M<br> ^M<br> Supported value types are: ^M<br> ^M<br> string Exact string match^M<br> &lt;ip1&gt;-&lt;ip2&gt; Range of IPv4 addresses.</td> <td>true</td> <td>false</td> <td></td> </tr> </table> <p class="table-title">Return Type</p>VMware.DeployAutomation.Types.<a href="Deplo%20yRule.html">DeployRule</a> <p class="table-title">Notes</p> <p class="table-title">Examples</p> <div class="example"> <p class="example-title">-------------- Example 1 --------------</p> <pre class="programlisting">C:\PS&gt; $rule = New-DeployRule -Name "defaultFolder" -Item "NewHosts" -AllHosts</pre> <p>Create a rule that places all hosts in the folder named "NewHosts".</p> <p class="example-title">-------------- Example 2 --------------</p> <pre class="programlisting">C:\PS&gt; $img = Get-ESXImageProfile -Name "My ESXi 5.0" C:\PS&gt; $rule = New-DeployRule -Name "testrule" -Item $img -Pattern "vendor=Acme","vendor==VMware, Inc.","ipv4=192.168.1.10-192.168.1.20"</pre> <p>Create a rule that assigns the image profile named "My ESXi 5.0" to hosts that match a set of vendors and are in a particular IPv4 range.</p> <p class="example-title">-------------- Example 3 --------------</p> <pre class="programlisting">C:\PS&gt; $img = Get-ScriptBundle -Name "myscriptbundle" C:\PS&gt; $rule = New-DeployRule -Name "testrule" -Item $img -Pattern "vendor=Acme","vendor==VMware, Inc.","ipv4=192.168.1.10-192.168.1.20"</pre> <p>Create a rule that assigns the scriptbundle named "myscriptbundle" to hosts that match a set of vendors and are in a particular IPv4 range.</p> </div> <hr> Copyright Â© 1998 - 2011 VMware, Inc.&nbsp;All rights reserved.</body></html>

