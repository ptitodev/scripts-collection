<html><head><title>Set-SpbmEntityConfiguration - PowerCLI System.Collections.Hashtable.ModuleName Help Reference</title><meta name="description" content=" Set-SpbmEntityConfiguration" /><meta name="keywords" content="PowerCLI System.Collections.Hashtable.ModuleName Help Reference, Set-SpbmEntityConfiguration, Set, SpbmEntityConfiguration" /><link href="doc-style.css" type="text/css" rel="StyleSheet"></head><body><h2 class="title"><a class="title" href='index.html' target="_top">PowerCLI Reference</a></h2><h1>Set-SpbmEntityConfiguration</h1><h2>Synopsis</h2>This cmdlet sets SPBM-related configuration data for VirtualMachine, HardDisk and Cluster objects.<p class="table-title">Syntax</p>Set-SpbmEntityConfiguration [-Configuration] &lt;SpbmEntityConfiguration[]&gt; [-SpbmEnabled &lt;Boolean&gt;] [-StoragePolicy &lt;SpbmStoragePolicy&gt;] [-AutoReplicationGroup] [-ReplicationGroup &lt;SpbmReplicationGroup&gt;] [-Server &lt;VIServer&gt;] [-WhatIf] [-Confirm] [&lt;CommonParameters&gt;]<p class="table-title">Related Commands</p><a href='http://www.vmware.com/support/developer/PowerCLI/PowerCLI651/html/Set-SpbmEntityConfiguration.html'>Online version</a><br><a href='Get-SpbmEntityConfiguration.html'>Get-SpbmEntityConfiguration</a><br><p class="table-title">Detailed Description</p>This cmdlet sets SPBM-related configuration data for VirtualMachine, HardDisk and Cluster objects. The configuration data includes storage policy association for VirtualMachine and HardDisk objects and SPBM enablement for Cluster objects.<p class="table-title">Parameters</p><table cellspacing="0"><tr><th>Name</th><th>Type</th><th>Description</th><th>Required?</td><th>Pipeline Input</th><th>Default Value</th></tr><tr class="r1"><td><a id="Configuration" name="Configuration"></a><strong>Configuration</strong></td><td><a href="SpbmEntityConfiguration.html">SpbmEntityConfiguration</a>[]</td><td>Specifies the configuration to modify. The supported types are SpbmClusterConfiguration, SpbmVMConfiguration, and SpbmHardDiskConfiguration.
<br/>This parameter supports OBN based on the names of the associated Cluster and VirtualMachine objects. This parameter also directly accepts objects of type Cluster, VirtualMachine, and HardDisk by silently converting them to the corresponding configuration object through a ArgumentTransformationAttribute object.</td><td>true</td><td>true (ByValue)</td><tr class="r0"><td><a id="AutoReplicationGroup" name="AutoReplicationGroup"></a><strong>AutoReplicationGroup</strong></td><td>SwitchParameter</td><td>Specify this if you do not want to explicitly provide a replication group and instead want to place the entity in the default replication group decided by the VASA provider. If ReplicationGroup and AutoReplicationGroup are both specified, an error is thrown. If none of them are specified, the entity is not placed in any replication group.</td><td>false</td><td>false</td><tr class="r1"><td><a id="Confirm" name="Confirm"></a><strong>Confirm</strong></td><td>SwitchParameter</td><td>If the value is $true, indicates that the cmdlet asks for confirmation before running. If the value is $false, the cmdlet runs without asking for user confirmation.</td><td>false</td><td>false</td><tr class="r0"><td><a id="ReplicationGroup" name="ReplicationGroup"></a><strong>ReplicationGroup</strong></td><td><a href="SpbmReplicationGroup.html">SpbmReplicationGroup</a></td><td>Specifies the replication group in which to put VirtualMachine and HardDisk objects.</td><td>false</td><td>false</td><tr class="r1"><td><a id="Server" name="Server"></a><strong>Server</strong></td><td>VIServer</td><td>Specifies the vCenter Server systems on which you want to run the cmdlet. If no value is given to this parameter, the command runs on the default servers. For more information about default servers, see the description of Connect-VIServer.</td><td>false</td><td>false</td><tr class="r0"><td><a id="SpbmEnabled" name="SpbmEnabled"></a><strong>SpbmEnabled</strong></td><td>Boolean</td><td>Indicates whether to enable or disable SPBM on a cluster.
<br/>Only applicable to SpbmClusterConfiguration objects. Attempts to apply to other configuration objects are ignored.</td><td>false</td><td>false</td><tr class="r1"><td><a id="StoragePolicy" name="StoragePolicy"></a><strong>StoragePolicy</strong></td><td><a href="SpbmStoragePolicy.html">SpbmStoragePolicy</a></td><td>Specifies the storage policy to be applied to all VirtualMachine and HardDisk objects defined in the Configuration objects. If the value is $null, removes the current policy association.
<br/>Only applicable to VirtualMachine and HardDisk configuration objects. Attempts to apply to Cluster configuration objects are ignored.</td><td>false</td><td>false</td><tr class="r0"><td><a id="WhatIf" name="WhatIf"></a><strong>WhatIf</strong></td><td>SwitchParameter</td><td>Indicates that the cmdlet is run only to display the changes that would be made and actually no objects are modified.</td><td>false</td><td>false</td></table><p class="table-title">Return Type</p>A list of modified objects derived from <a href="SpbmEntityConfiguration.html">SpbmEntityConfiguration</a>. Types include <a href="SpbmVMConfiguration.html">SpbmVMConfiguration</a>, <a href="SpbmHardDiskConfiguration.html">SpbmHardDiskConfiguration</a>, <a href="SpbmClusterConfiguration.html">SpbmClusterConfiguration</a>. Returns one output object for each input object. For example, if a virtual machine does not have a storage policy, the cmdlet returns a result for it with the policy property set to $null.
<p class="table-title">Notes</p>Works only with vCenter Server 5.5 or later.
    
    For more information, see the VMware Storage Policy API Reference:
    https://pubs.vmware.com/vsphere-60/index.jsp#com.vmware.vspsdk.apiref.doc/right-pane.html<p class="table-title">Examples</p><div class="example"><p class="example-title">--------------  Example 1 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration (Get-SpbmEntityConfiguration $cluster1) -SpbmEnabled $true</pre><p>Enables SPBM for the $cluster1 cluster.</p><p class="example-title">--------------  Example 2 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration (Get-SpbmEntityConfiguration $cluster1) -SpbmEnabled $false</pre><p>Disables SPBM for the $cluster1 cluster.</p><p class="example-title">--------------  Example 3 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration (Get-SpbmEntityConfiguration $vm1, $vm2) -StoragePolicy $policy</pre><p>Associates the $policy storage policy to the $vm1 and $vm2 virtual machines.</p><p class="example-title">--------------  Example 4 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration (Get-SpbmEntityConfiguration $hd1) -StoragePolicy $policy</pre><p>Associates the $policy storage policy to the $hd1 hard disk.</p><p class="example-title">--------------  Example 5 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration (Get-SpbmEntityConfiguration $vm1) -StoragePolicy $null</pre><p>Removes the association of the $vm1 virtual machine from the storage policy it is associated with, if any.</p><p class="example-title">--------------  Example 6 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration (Get-SpbmEntityConfiguration $hd1) -StoragePolicy $null</pre><p>Removes the association of the $hd1 hard disk from the storage policy it is associated with, if any.</p><p class="example-title">--------------  Example 7 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration &quot;MyVM&quot; -StoragePolicy $null</pre><p>Removes the association of the &quot;MyVM&quot; virtual machine from the storage policy it is associated with, if any.</p><p class="example-title">--------------  Example 8 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration &quot;MyCluster&quot; -SpbmEnabled $true</pre><p>Enables SPBM for the &quot;MyCluster&quot; cluster.</p><p class="example-title">--------------  Example 9 --------------</p><pre class="programlisting">Set-SpbmEntityConfiguration -Configuration $vm, $hd -StoragePolicy $replicationPolicy -ReplicationGroup $sourceRg</pre><p>Associates the $replicationPolicy storage policy to the $vm virtual machine and $hd hard disk, and puts them in the $sourceRg replication group.</p></div><hr>Copyright &copy; VMware, Inc.&nbsp;All rights reserved.</body></html>
